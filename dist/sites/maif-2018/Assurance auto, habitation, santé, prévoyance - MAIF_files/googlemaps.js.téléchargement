var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

var alphabet=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];(function($){$.getGeoLocationError=function(error){$('<div id="popin-geolocation-impossible" class="modal fade" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" data-dismiss="modal" aria-label="Close" class="close"><i class="maificon maificon-close"></i></button><div class="modal-title">Géolocalisation impossible</div></div><div class="modal-body"><div class="text-center"><p>Merci d\'activer la géolocalisation dans votre navigateur.</p></div></div></div></div>').appendTo("body");$.openPopin({type:"inline",target:"#popin-geolocation-impossible"});};$.getGeolocAddressByNavigator=function(callback){function setPosition(position,callback){var geocoder=new google.maps.Geocoder();var lng=position.coords.longitude;var lat=position.coords.latitude;var latlng=new google.maps.LatLng(lat,lng);geocoder.geocode({latLng:latlng,region:"FR"},function(results,status){if(status==google.maps.GeocoderStatus.OK){if($.isFunction(callback)){callback(results[0].formatted_address);}}});}navigator.geolocation.getCurrentPosition(function(position){setPosition(position,callback);},$.getGeoLocationError);};$.getGeolocLatLngByNavigator=function(callback){function setPosition(position){if($.isFunction(callback)){callback(position.coords);}}navigator.geolocation.getCurrentPosition(setPosition,$.getGeoLocationError);};$.getGeolocLatLngByAddress=function(address,callback){var geocoder=new google.maps.Geocoder();geocoder.geocode({address:address,region:"FR"},function(results,status){if(status==google.maps.GeocoderStatus.OK&&$.isFunction(callback)){callback(results[0].geometry.location.lat(),results[0].geometry.location.lng());}else{if($.isFunction(callback)){callback();}}});};$.fn.viewGeolocByAdress=function(address,callback){return this.each(function(){var container=$(this);var map;if(container.data("google-map")!==undefined){map=container.data("google-map");if(container.data("google-map-markers")!==undefined){var markers=container.data("google-map-markers");for(var i=0;i<markers.length;i++){markers[i].setMap(null);}}}else{var bounds=new google.maps.LatLngBounds();map=new google.maps.Map(container.get(0),{mapTypeControl:false,zoomControl:false,panControl:false,streetViewControl:false,draggable:true,scrollwheel:true,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]});}var geocoder=new google.maps.Geocoder();geocoder.geocode({address:address,region:"FR"},function(results,status){if(status==google.maps.GeocoderStatus.OK){position=results[0].geometry.location;map.setCenter(position);map.setMapTypeId(google.maps.MapTypeId.ROADMAP);map.setZoom(6);container.data("google-map",map);container.data("google-map-bounds",bounds);if($.isFunction(callback)){callback.call(container);}}});});};$.fn.viewGeolocByAdressOrLatLngAddMarker=function(container_list,marker_icon,address_or_latlng,desc,callback){function addMarker(container_list,container,map,marker_icon,position,callback){var marker,description;var markers=[],descriptions=[];if(container.data("google-map-markers")!==undefined){markers=container.data("google-map-markers");}if(container.data("google-map-descriptions")!==undefined){descriptions=container.data("google-map-descriptions");}var bounds=container.data("google-map-bounds");var myIcon=new google.maps.MarkerImage(basedir+"/img/rwd/reparateurs-partenaires/shadow/off/"+marker_icon+".png",null,null,null,new google.maps.Size(29,43));marker=new google.maps.Marker({map:map,position:position,icon:myIcon});description=new InfoBubble({map:map,shadowStyle:0,padding:0,backgroundColor:"#ffffff",borderRadius:0,borderWidth:0,disableAnimation:true,minWidth:260,maxWidth:260,minHeight:100,position:position,arrowSize:10});var divContent=$('<div class="fondInFoBulle" />');divContent.html(desc);description.setContent(divContent.get(0));google.maps.event.addListener(marker,"click",function(){var marker_icon_click=marker.icon.url;var marker_icon_click_parts=marker_icon_click.split("/");var marker_icon_click_parts_last=marker_icon_click_parts[marker_icon_click_parts.length-1];var marker_icon_click_parts_point=marker_icon_click_parts_last.split(".");var marker_icon_on=marker_icon_click_parts_point[0];for(var i=0;i<descriptions.length;i++){descriptions[i].close(map);}var myIconTemp;for(var i=0;i<markers.length;i++){if(i!=alphabet.indexOf(marker_icon_on)){myIconTemp=new google.maps.MarkerImage(basedir+"/img/rwd/reparateurs-partenaires/shadow/off/"+alphabet[i]+".png",null,null,null,new google.maps.Size(29,43));}else{myIconTemp=new google.maps.MarkerImage(basedir+"/img/rwd/reparateurs-partenaires/shadow/on/"+marker_icon_on+".png",null,null,null,new google.maps.Size(29,43));}markers[i].setIcon(myIconTemp);}description.open(map,marker);var lis=$(container_list).find(">li");var imgInLiActive=$(lis).filter(".active").removeClass("active").find("img");if(imgInLiActive.size()>0){imgInLiActive.attr("src",imgInLiActive.attr("src").replace("/on/","/off/"));}var li=lis.filter('[data-no="'+alphabet.indexOf(marker_icon_on)+'"]').addClass("active");var imgInLi=li.find("img");imgInLi.attr("src",imgInLi.attr("src").replace("/off/","/on/"));});markers.push(marker);descriptions.push(description);markers.sort(function(a,b){return a.icon.url<b.icon.url?-1:1;});bounds.extend(position);container.data("google-map-markers",markers);container.data("google-map-descriptions",descriptions);container.data("google-map-bounds",bounds);if($.isFunction(callback)){callback.call(container);}}return this.each(function(){var container=$(this);var map=container.data("google-map");var geocoder=new google.maps.Geocoder();var params={region:"FR"};if(typeof(address_or_latlng)=="object"){params.latLng=new google.maps.LatLng(address_or_latlng.latitude,address_or_latlng.longitude);addMarker(container_list,container,map,marker_icon,params.latLng,callback);}else{params.address=address_or_latlng;geocoder.geocode(params,function(results,status){if(status==google.maps.GeocoderStatus.OK){position=results[0].geometry.location;addMarker(container_list,container,map,marker_icon,position,callback);}});}});};$.fn.viewGeolocByAdressFitBounds=function(zoom){return this.each(function(){var container=$(this);var map=container.data("google-map");var bounds=container.data("google-map-bounds");map.fitBounds(bounds);if(zoom!=null){map.setZoom(zoom);}});};$.fn.viewGeolocOpenMarker=function(marker_name){return this.each(function(){var container=$(this);var map=container.data("google-map");var markers=[];if(container.data("google-map-markers")!==undefined){markers=container.data("google-map-markers");}container.data("google-map-markers",markers);});};$.viewGeolocAfterSearch=function(container_map,container_list,type,params){if(type=="reparateurs"){$(container_map).viewGeolocByAdress("France",function(){$.ajax({type:"POST",url:basedir+"/JSON-RPC",dataType:"json",contentType:"application/json",data:JSON.stringify({method:"Geolocalisation.getListeReparateur",params:[]}),success:function(data){var reparateurs=data.result.list;for(var i in reparateurs){$.viewGeolocAfterSearchReparateurs(container_map,container_list,reparateurs[i],i,params);}}});});}else{if(type=="delegations"){$(container_map).viewGeolocByAdress("France",function(){$.ajax({type:"POST",url:"/JSON-RPC",dataType:"json",contentType:"application/json",data:JSON.stringify({method:"Geolocalisation.getListeDelegation",params:[]}),success:function(data){var delegations=data.result.list;for(var i in delegations){$.viewGeolocAfterSearchDelegations(container_map,container_list,delegations[i],i,delegations.length,params);}}});});}}};$.viewGeolocAfterSearchReparateurs=function(container_map,container_list,reparateur,no_reparateur,params){var latLng={latitude:reparateur.latitude,longitude:reparateur.longitude};var adresse="";if(reparateur.adresse!=null){if(reparateur.adresse.ligne1!=null&&reparateur.adresse.ligne1!=""){adresse+=reparateur.adresse.ligne1+" ";}if(reparateur.adresse.ligne2!=null&&reparateur.adresse.ligne2!=""){adresse+=reparateur.adresse.ligne2;}}var adresseCompleteHtml='<div class="reparateur-nom">'+reparateur.nom+"</div>"+(reparateur.libelleFamille!=null&&reparateur.libelleFamille!=""?'<div class="reparateur-type">'+reparateur.libelleFamille+"</div>":"")+(reparateur.typeReparation!=null&&reparateur.typeReparation!=""?'<div class="reparateur-type-service"><i class="maificon maificon-info2" />'+reparateur.typeReparation+"</div>":"")+(adresse!=""?'<div class="reparateur-adresse">'+adresse+"</div>":"")+(reparateur.adresse!=null&&reparateur.adresse.ligne4!=null&&reparateur.adresse.ligne4!=""?'<div class="reparateur-ville">'+reparateur.adresse.ligne4+"</div>":"")+(reparateur.telephone!=null&&reparateur.telephone.numProfessionnel!=null&&reparateur.telephone.numProfessionnel!=""?'<a class="reparateur-tel" href="tel:'+reparateur.telephone.numProfessionnel+'">'+reparateur.telephone.numProfessionnel+"</a>":"")+(reparateur.urlSite!=null&&reparateur.urlSite!=""?'<a class="reparateur-site" target="_blank" href="'+reparateur.urlSite+'">Prendre un RDV</a>':"");var adresseText=adresse+reparateur.adresse.ligne4;$(container_map).viewGeolocByAdressOrLatLngAddMarker(container_list,alphabet[no_reparateur],latLng,adresseCompleteHtml+'<form id="formReparPopin" class="maif-form">'+(params.selectable===true?'<button class="btn btn-bevel-left btn-block color-1" onclick="$.setGeoLocReparateur('+reparateur.numero+');return false">Choisir</button>':"")+'</div><b>Itinéraire depuis : </b><div><div class="form-group"><input type="text" id="idReparPopin" placeholder="Adresse complête ou ville" value="'+$('#reparateurs-partenaires-adresse input[name="adresseInternaute"]').val()+"\" /></div><button class=\"btn btn-default btn-icon btn-bevel left\" onclick=\"$.getGeoLocItineraire($(this).prev().find('input').val(), $(this).closest('.fondInFoBulle').find('.reparateur-adresse').text() + $(this).closest('.fondInFoBulle').find('.reparateur-ville').text(), "+reparateur.latitude+", "+reparateur.longitude+');return false"><i class="maificon maificon-search" /></div></form>',function(){$(this).viewGeolocByAdressFitBounds();$('<li class="row" data-no="'+no_reparateur+'"><div class="col-xs-8">'+adresseCompleteHtml+'</div><div class="col-xs-4 text-right"><img src="'+basedir+"/img/rwd/reparateurs-partenaires/off/"+alphabet[no_reparateur]+'.png" alt="" /></div>'+(params.selectable===true?'<button class="btn btn-bevel-left color-1" onclick="$.setGeoLocReparateur('+reparateur.numero+')">Choisir</button>':"")+"</li>").appendTo(container_list).on("click",function(){var idReparateur=$(this).data("no");var markers=$(container_map).data("google-map-markers");google.maps.event.trigger(markers[idReparateur],"click");$('#formReparPopin input[id="idReparPopin"]').val($('#reparateurs-partenaires-adresse input[name="adresseInternaute"]').val());});});};$.viewGeolocAfterSearchDelegations=function(container_map,container_list,delegation,no_delegation,size,params){var latLng={latitude:delegation.latitude,longitude:delegation.longitude};var libelleBouton="";if(params.physique===true){libelleBouton="Choisir cette délégation";}else{libelleBouton="Choisir ce pôle";}var adresseCompleteHtml='<div class="delegation-libelle">'+delegation.libelle+"</div>"+(delegation.adresse!=null?'<div class="delegation-adresse">'+delegation.adresse.ligne1+'</div><div class="delegation-adresse">'+delegation.adresse.ligne2+"</div>":"");var adresseComplete2Html='<div class="delegation-only-active"><div class="row"><div class="col-xs-11 col-center"><a class="btn btn-block" href="/services-en-ligne/prise-rendez-vous-'+(params.physique===true?"pp":"pm")+"/accueil.action?numDeleg="+delegation.entiteGestion+'">'+(params.modifLieu===true?libelleBouton:"Prendre rendez-vous")+"</a></div></div>"+(delegation.cheminContrib!=null&&delegation.cheminContrib!=""?'<div class="block-information"><i class="maificon maificon-info"></i>'+delegation.cheminContrib+"</div>":"")+(delegation.horairesOuverture!=null?'<div class="delegation-horaires"><b>Pour nous rencontrer, voici nos horaires : </b><br />'+delegation.horairesOuverture+"</div>":"")+(delegation.telephone!=null?'<div class="delegation-tel">Tél : '+delegation.telephone+(delegation.horairesAppel!=null?" *":"")+'</div><div class="delegation-mentionLegale">appel non surtaxé, coût selon opérateur. hors Dom</div>':"")+(delegation.fax!=null?'<div class="delegation-tel">Fax : '+delegation.fax+"</div>":"")+'<a href="/service/ecriveznous/afficherEcrivezNous.action" class="link-highlight delegation-ecrire">Nous envoyer un e-mail</a>'+(delegation.horairesAppel!=null?'<div class="delegation-legend form-legend">* '+delegation.horairesAppel+"</div>":"")+"</div>";var adresseCompleteMapHtml='<div class="delegation-libelle">'+delegation.libelle+"</div>"+(delegation.adresse!=null?'<div class="delegation-adresse">'+delegation.adresse.ligne1+'</div><div class="delegation-adresse">'+delegation.adresse.ligne2+"</div>":"")+(delegation.telephone!=null?'<a class="delegation-tel" href="tel:'+delegation.telephone+'">Tél : '+delegation.telephone+'</div><div class="delegation-mentionLegale">appel non surtaxé, coût selon opérateur. hors Dom</div>':"")+'<a class="btn btn-block" href="/services-en-ligne/prise-rendez-vous-'+(params.physique===true?"pp":"pm")+"/accueil.action?numDeleg="+delegation.entiteGestion+'">'+(params.modifLieu===true?libelleBouton:"Prendre rendez-vous")+'</a><form class="maif-form"></div><b>Itinéraire depuis : </b><div><div class="form-group"><input type="text" placeholder="Adresse complête ou ville" value="'+delegation.adresse.commune+"\" /></div><button class=\"btn btn-default btn-icon btn-bevel left\" onclick=\"$.getGeoLocItineraire($(this).prev().find('input').val(), $(this).closest('.fondInFoBulle').find('.delegation-adresse').text() + $(this).closest('.fondInFoBulle').find('.reparateur-ville').text(), "+delegation.latitude+", "+delegation.longitude+");xt_click(this,'C','18','Recherche_delegation::"+(params.physique===true?"pp":"pm")+"::popin_delegation','N');return false\"><i class=\"maificon maificon-search\" /></div></form>";$(container_map).viewGeolocByAdressOrLatLngAddMarker(container_list,alphabet[no_delegation],latLng,adresseCompleteMapHtml,function(){if(size>1){$(this).viewGeolocByAdressFitBounds();}else{$(this).viewGeolocByAdressFitBounds(18);}$('<li class="row" data-no="'+no_delegation+'"><div class="col-xs-10">'+adresseCompleteHtml+'</div><div class="col-xs-2 text-right"><img src="'+basedir+"/img/rwd/reparateurs-partenaires/off/"+alphabet[no_delegation]+'.png" alt="" /></div><div class="col-xs-12">'+adresseComplete2Html+"</div></li>").appendTo(container_list).on("click",function(){var idDelegation=$(this).data("no");var markers=$(container_map).data("google-map-markers");google.maps.event.trigger(markers[idDelegation],"click");});});};$.fn.refreshGeoloc=function(container_list){return this.each(function(){var container=$(this);var map=container.data("google-map");var bounds=container.data("google-map-bounds");var markers=container.data("google-map-markers");google.maps.event.trigger(map,"resize"),map.fitBounds(bounds);if($(container_list).find("li.active").size()>0){var markerSelected=$(container_list).find("li.active").index()-1;google.maps.event.trigger(markers[markerSelected],"click");}});};$.fn.getGeolocSearchAndSubmit=function(){return this.each(function(){var el=$(this);$.getGeolocLatLngByAddress(el.val(),function(lat,lng){var form=el.closest("form");form.find('input[name="latitudeInternaute"]').val(lat);form.find('input[name="longitudeInternaute"]').val(lng);form.submit();});});};$.getGeoLocItineraire=function(adresseDepart,adresseArrivee,latitudeDestination,longitudeDestination){if(adresseDepart==""){$.openPopin({type:"ajax",url:"popin-itineraire-depart.html",target:"#popin-itineraire-depart"});}else{var geocoder=new google.maps.Geocoder();geocoder.geocode({address:adresseDepart},function(results,status){if(status!=google.maps.GeocoderStatus.OK){$.openPopin({type:"ajax",url:"popin-itineraire-impossible.html",target:"#popin-itineraire-impossible"});}else{var formItineraire=$("#idFormItineraire");formItineraire.find('input[name="adresseDepart"]').val(adresseDepart);formItineraire.find('input[name="adresseArrivee"]').val(adresseArrivee);formItineraire.find('input[name="latitudeDestination"]').val(latitudeDestination);formItineraire.find('input[name="longitudeDestination"]').val(longitudeDestination);window.open("#","New_Window","width=1000,height=745,menubar=no,resizable=no,scrollbars=yes,status=yes");formItineraire.submit();}});}};$.viewGeoLocItineraire=function(adresseDepart,adresseArrivee,latitudeDestination,longitudeDestination,containerItineraireCarte,containerItineraireTexte){var directionsService=new google.maps.DirectionsService();var mapItineraire;var directionsDisplay=new google.maps.DirectionsRenderer();var myOptions={zoom:7,mapTypeId:google.maps.MapTypeId.ROADMAP};var geocoder=new google.maps.Geocoder();geocoder.geocode({address:adresseDepart,region:"FR"},function(results,status){if(status==google.maps.GeocoderStatus.OK){var point=null;for(cpt=0;cpt<results.length;cpt++){var composantAdresse=results[cpt].address_components;for(i in composantAdresse){point=results[cpt].geometry.location;}if(point!=null){break;}}if(point!=null){$(containerItineraireCarte).empty();$(containerItineraireTexte).empty();mapItineraire=new google.maps.Map($(containerItineraireCarte).get(0),myOptions);directionsDisplay.setMap(mapItineraire);directionsDisplay.setPanel($(containerItineraireTexte).get(0));var request={origin:point,destination:new google.maps.LatLng(latitudeDestination,longitudeDestination),travelMode:google.maps.DirectionsTravelMode.DRIVING};directionsService.route(request,function(response,status){if(status==google.maps.DirectionsStatus.OK){var myRoute=response.routes[0].legs[0];myRoute.end_address=adresseArrivee;directionsDisplay.setDirections(response);}else{$.openPopin({type:"ajax",url:"#",target:"#popin-itineraire-impossible"});}});}else{$.openPopin({type:"ajax",url:"#",target:"#popin-itineraire-impossible"});}}});};$.setGeoLocReparateur=function(idReparateur){$('#formGeolocRep input[name="idReparateurSelectionne"]').val(idReparateur);window.maif.ajax.soumettreAction("formGeolocRep","selectionnerReparateurSinistre.action");};})(jQuery);$(document).ready(function(){$("#reparateurs-partenaires-mobile-tabs li").off("click").on("click",function(e){if(!$(e.target).closest("li").hasClass("active")){$("#form-reparateur-liste, #form-reparateur-map").toggleClass("hidden-xs");$("#maif-map").refreshGeoloc("#form-reparateur-liste");}});$("#delegations-mobile-tabs li").off("click").on("click",function(e){if(!$(e.target).closest("li").hasClass("active")){$("#form-delegation-liste, #form-delegation-map").toggleClass("hidden-xs");$("#maif-map").refreshGeoloc("#form-delegation-liste");}});});

}
/*
     FILE ARCHIVED ON 19:37:01 Aug 11, 2018 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:49:19 Apr 16, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.644
  exclusion.robots: 0.076
  exclusion.robots.policy: 0.065
  cdx.remote: 0.059
  esindex: 0.01
  LoadShardBlock: 72.782 (3)
  PetaboxLoader3.datanode: 49.277 (4)
  PetaboxLoader3.resolve: 68.877 (2)
  load_resource: 56.901
*/