var GoogleMapHelper=function(){"use strict";this.magasins={};this.pointsrelais={};this.markerIcon={url:"/images_assets/Google_Cybertek.png",size:new google.maps.Size(100,40)};this.defaultLatLng={lat:45.768196,lng:2.432664};};GoogleMapHelper.prototype.drawMap=function(elementId,magasinMapList,user_pos){"use strict";var i=0,map=null,marker=null,infowindow=null,keys=null,lat=0,lng=0,element=document.getElementById(elementId),options={};if(element===null){throw("GoogleMapMaker.drawMap : element ("+elementId+") is null");}
if(magasinMapList){this.magasins=magasinMapList;keys=Object.keys(this.magasins);}
if(this.magasins===null){throw("GoogleMapMaker.drawMap : this.magasins is null");}
if(user_pos===undefined){user_pos=this.defaultLatLng;}
options={center:{lat:user_pos.lat,lng:user_pos.lng},zoom:6,mapTypeId:google.maps.MapTypeId.ROADMAP};if(keys.length===1){lat=Number(this.magasins[keys[0]][1]);lng=Number(this.magasins[keys[0]][2]);options.zoom=11;options.center={lat:lat,lng:lng};}
map=new google.maps.Map(element,options);for(i=0;i<keys.length;i+=1){if(this.magasins[keys[i]]===null){throw("GoogleMapMaker.drawMap : this.magasins[i] is undefined");}
infowindow=new google.maps.InfoWindow({content:"<a href='"+this.magasins[keys[i]][3]+"'>"+this.magasins[keys[i]][0]+"</a>"});lat=Number(this.magasins[keys[i]][1]);lng=Number(this.magasins[keys[i]][2]);marker=new google.maps.Marker();marker.setPosition({lat:lat,lng:lng});marker.setTitle(this.magasins[keys[i]][0]);marker.setIcon(this.markerIcon);marker.setZIndex(i);marker.setMap(map);marker.addListener('click',this.openWindow.bind(this,infowindow,map,marker));}};GoogleMapHelper.prototype.drawMapPointsRelais=function(elementId,pointsRelaisList,user_pos){"use strict";var i=0,map=null,marker=null,infowindow=null,keys=null,lat=0,lng=0,element=document.getElementById(elementId),options={};if(element===null){throw("GoogleMapMaker.drawMap : element ("+elementId+") is null");}
if(pointsRelaisList){this.pointsRelaisList=pointsRelaisList;keys=Object.keys(this.pointsRelaisList);}
if(this.pointsRelaisList===null){throw("GoogleMapMaker.drawMap : this.pointsRelaisList is null");}
if(user_pos===undefined){user_pos=this.defaultLatLng;}
options={center:{lat:user_pos.lat,lng:user_pos.lng},zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP};if(keys.length===1){lat=Number(this.pointsRelaisList[keys[0]][1]);lng=Number(this.pointsRelaisList[keys[0]][2]);options.zoom=11;options.center={lat:lat,lng:lng};}
var bounds=new google.maps.LatLngBounds();map=new google.maps.Map(element,options);for(i=0;i<keys.length;i+=1){if(this.pointsRelaisList[keys[i]]===null){throw("GoogleMapMaker.drawMap : this.pointsRelaisList[i] is undefined");}
infowindow=new google.maps.InfoWindow({content:this.pointsRelaisList[keys[i]][0]});lat=Number(this.pointsRelaisList[keys[i]][1]);lng=Number(this.pointsRelaisList[keys[i]][2]);marker=new google.maps.Marker();marker.setPosition({lat:lat,lng:lng});marker.setTitle(this.pointsRelaisList[keys[i]][4]);marker.setIcon(this.markerIcon);marker.setZIndex(i);marker.setMap(map);marker.addListener('click',this.openWindow.bind(this,infowindow,map,marker));bounds.extend(new google.maps.LatLng(lat,lng));}
map.setCenter(bounds.getCenter());};GoogleMapHelper.prototype.drawMapMagasins=function(elementId,pointsRelaisList,user_pos){"use strict";var i=0,map=null,marker=null,infowindow=null,keys=null,lat=0,lng=0,element=document.getElementById(elementId),options={};if(element===null){throw("GoogleMapMaker.drawMap : element ("+elementId+") is null");}
if(pointsRelaisList){this.pointsRelaisList=pointsRelaisList;keys=Object.keys(this.pointsRelaisList);}
if(this.pointsRelaisList===null){throw("GoogleMapMaker.drawMap : this.pointsRelaisList is null");}
if(user_pos===undefined){user_pos=this.defaultLatLng;}
options={center:{lat:user_pos.lat,lng:user_pos.lng},zoom:5,mapTypeId:google.maps.MapTypeId.ROADMAP};if(keys.length===1){lat=Number(this.pointsRelaisList[keys[0]][1]);lng=Number(this.pointsRelaisList[keys[0]][2]);options.zoom=6;options.center={lat:lat,lng:lng};}
var bounds=new google.maps.LatLngBounds();map=new google.maps.Map(element,options);for(i=0;i<keys.length;i+=1){if(this.pointsRelaisList[keys[i]]===null){throw("GoogleMapMaker.drawMap : this.pointsRelaisList[i] is undefined");}
infowindow=new google.maps.InfoWindow({content:this.pointsRelaisList[keys[i]][5]});lat=Number(this.pointsRelaisList[keys[i]][1]);lng=Number(this.pointsRelaisList[keys[i]][2]);marker=new google.maps.Marker();marker.setPosition({lat:lat,lng:lng});marker.setTitle(this.pointsRelaisList[keys[i]][4]);marker.setIcon(this.markerIcon);marker.setZIndex(i);marker.setMap(map);marker.addListener('click',this.openWindow.bind(this,infowindow,map,marker));bounds.extend({lat:lat,lng:lng});}
map.setCenter(bounds.getCenter());};GoogleMapHelper.prototype.openWindow=function(infowindow,map,marker){"use strict";infowindow.open(map,marker);};GoogleMapHelper.prototype.calculateAndDisplayRoute=function(directionsService,directionsDisplay,origin,dest){"use strict";directionsService.route({origin:{lat:origin.lat,lng:origin.lng},destination:{lat:dest.lat,lng:dest.lng},travelMode:google.maps.TravelMode.DRIVING},function(response,status){if(status===google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(response);}});};var MapMaker=function(){"use strict";this.elementId=null;this.magasinMapList=null;};MapMaker.drawMagasin=function(elementId,magasinMapList){"use strict";if(typeof elementId!=="string"){throw "GoogleMapMaker.drawMagasin : elementId is not a string";}
if(magasinMapList===undefined){throw "GoogleMapMaker.drawMagasin : magasinMapList is undefined";}
this.elementId=elementId;this.magasinMapList=magasinMapList;this.positionError();};MapMaker.drawPointsRelais=function(elementId,magasinMapList){"use strict";if(typeof elementId!=="string"){throw "GoogleMapMaker.drawPointRetrait : elementId is not a string";}
if(magasinMapList===undefined){throw "GoogleMapMaker.drawPointRetrait : magasinMapList is undefined";}
this.elementId=elementId;this.magasinMapList=magasinMapList;this.positionErrorPointsRelais();};MapMaker.drawMagasins=function(elementId,magasinMapList){"use strict";if(typeof elementId!=="string"){throw "GoogleMapMaker.drawPointRetrait : elementId is not a string";}
if(magasinMapList===undefined){throw "GoogleMapMaker.drawPointRetrait : magasinMapList is undefined";}
this.elementId=elementId;this.magasinMapList=magasinMapList;this.positionErrorMagasins();};MapMaker.positionSucces=function(position){"use strict";var m=new GoogleMapHelper();m.drawMap(this.elementId,this.magasinMapList,{lat:position.coords.latitude,lng:position.coords.longitude});};MapMaker.positionError=function(){"use strict";var m=new GoogleMapHelper();m.drawMap(this.elementId,this.magasinMapList);};MapMaker.positionErrorPointsRelais=function(){"use strict";var m=new GoogleMapHelper();m.drawMapPointsRelais(this.elementId,this.magasinMapList);};MapMaker.positionErrorMagasins=function(){"use strict";var m=new GoogleMapHelper();m.drawMapMagasins(this.elementId,this.magasinMapList);};