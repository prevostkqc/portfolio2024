var IS_FOR_DEBUG=!1,JSEndpoints={},JSViews={},JSAsync={},JSUtils={},JSModels={},JSON={},JSONFunc=new function(){"use strict";function i(n){return n<10?"0"+n:n}function o(){return this.valueOf()}function s(n){return f.lastIndex=0,f.test(n)?'"'+n.replace(f,function(n){var t=h[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function u(i,f){var o,l,h,a,v=n,c,e=f[i];e&&typeof e=="object"&&typeof e.toJSON=="function"&&(e=e.toJSON(i));typeof t=="function"&&(e=t.call(f,i,e));switch(typeof e){case"string":return s(e);case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e)return"null";if(n+=r,c=[],Object.prototype.toString.apply(e)==="[object Array]"){for(a=e.length,o=0;o<a;o+=1)c[o]=u(o,e)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,o=0;o<a;o+=1)typeof t[o]=="string"&&(l=t[o],h=u(l,e),h&&c.push(s(l)+(n?": ":":")+h));else for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&(h=u(l,e),h&&c.push(s(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}var c=/^[\],:{}\s]*$/,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,a=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,v=/(?:^|:|,)(?:\s*\[)+/g,f=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,r,h,t;typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=o,Number.prototype.toJSON=o,String.prototype.toJSON=o);typeof JSON.stringify!="function"&&(h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(i,f,e){var o;if(n="",r="",typeof e=="number")for(o=0;o<e;o+=1)r+=" ";else typeof e=="string"&&(r=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return u("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(n,t){var r,u,i=n[t];if(i&&typeof i=="object")for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(u=walk(i,r),u!==undefined?i[r]=u:delete i[r]);return reviver.call(n,t,i)}var j;if(text=String(text),e.lastIndex=0,e.test(text)&&(text=text.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),c.test(text.replace(l,"@").replace(a,"]").replace(v,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse");})},JSModelsFunc=new function(){typeof JSModels.asyncCallBacks!="function"&&(JSModels.asyncCallBacks=function(){return{callBeforeSend:null,callError:null,callComplete:null}})},JSViewsFunc=new function(){function n(){IS_FOR_DEBUG&&JSUtils.Log("INIT JSViews area Account js func");JSViews.AccountEvents=new function(){function n(){var n=JSEndpoints.model_page_click;$(":button[id*='account_models_page_']").each(function(t,i){$(i).on("click",function(t){var r,u,f;t.preventDefault();r=parseInt($(i).val());u=$("#account_pagination_form");$(u).length==0?(f=n+"&page_number="+r,window.location.href=f):($("#account_filter_page_number").val(r),$(u).submit())})});$(":button[id='account_models_page-previous']").each(function(t,i){$(i).on("click",function(t){var r,u,f;t.preventDefault();r=parseInt($(i).attr("data-value"));u=$("#account_pagination_form");$(u).length==0?(f=n+"&page_number="+r,window.location.href=f):($("#account_filter_page_number").val(r),$(u).submit())})});$(":button[id='account_models_page-next']").each(function(t,i){$(i).on("click",function(t){var r,u,f;t.preventDefault();r=parseInt($(i).attr("data-value"));u=$("#account_pagination_form");$(u).length==0?(f=n+"&page_number="+r,window.location.href=f):($("#account_filter_page_number").val(r),$(u).submit())})})}$("#evt_voucher_close").on("click",function(n){n.preventDefault();$("#modal_voucher").hide();$("#voucher_send_message_action").each(function(){JSUtils.UnbindEvent("voucher_send_message_action","click")});$("#voucher_send_message_value").each(function(){JSUtils.UnbindEvent("voucher_send_message_value","focus")});$("#voucher_upload_attachment_form").each(function(){JSUtils.UnbindEvent("voucher_upload_attachment_form","submit")});$("#voucher_upload_attachment_file").each(function(){JSUtils.UnbindEvent("voucher_upload_attachment_file","click")});$(":input[id*='voucher_attachment_delete_']").each(function(n){JSUtils.UnbindEvent("voucher_attachment_delete_"+n,"click")});$("a[id*='voucher_attachment_download_']").each(function(n){JSUtils.UnbindEvent("voucher_attachment_download_"+n,"click")});$("#async_voucher").html("")});$("#evt_orderproducts_close").on("click",function(n){n.preventDefault();$("#modal_orderproducts").hide();$("#async_orderproducts").html("")});$("#evt_voucher_form_close").on("click",function(n){n.preventDefault();$("#modal_voucher_form").hide();$("#async_voucher_form").html("")});$("#order_voucher_close").on("click",function(n){n.preventDefault();$("#modal_voucher_form").hide();$("#modal_voucher_form #modal_title").html("");$("#async_voucher_form").html("")});$("#evt_invoice_message_close").on("click",function(n){n.preventDefault();$("#modal_invoice_message").hide();$("#async_invoice_message").html("")});$("#evt_account_menu_message_close").on("click",function(n){n.preventDefault();$("#modal_account_menu_message").hide();$("#async_account_menu_message").html("")});typeof JSViews.Account.VoucherAttachmentEvents!="function"&&(JSViews.Account.VoucherAttachmentEvents=function(){var n=parseInt($("#Voucher_id").val());$(":input[id*='voucher_attachment_delete_']").each(function(t,i){$(i).on("click",function(i){i.preventDefault();var r=parseInt($("#voucher_attachment_item_"+t).val());JSViews.Account.PatchAttachment(n,r)})});$("a[id*='voucher_attachment_download_']").each(function(t,i){$(i).on("click",function(r){r.preventDefault();$("#VoucherAttachmentError > span").html("");var u=parseInt($("#voucher_attachment_item_"+t).val()),f=$(i).attr("href").replace("{voucher_id}",n).replace("{attachment_id}",u),e=$(i).text();JSViews.Account.DownloadAttachment(f,e)})})});typeof JSViews.Account.InputVoucherMessageEvents!="function"&&(JSViews.Account.InputVoucherMessageEvents=function(){$("#voucher_send_message_action").on("click",function(){var n=$(this).attr("id").replace("_action","_form"),t=$("#"+n).attr("action");JSViews.Account.SendMessage(t,n)})});typeof JSViews.Account.InputVoucherAttachmentEvents!="function"&&(JSViews.Account.InputVoucherAttachmentEvents=function(){$("#voucher_upload_attachment_form").on("submit",function(n){n.preventDefault();var t=parseInt($("#voucher_upload_attachment_id").val()),i=$(this).attr("action").replace("{voucher_id}",t),r=i+"",u=$(this).attr("id");JSViews.Account.PostAttachment(r,u)});$("#voucher_upload_attachment_file").on("click",function(){$("#PostVoucherAttachmentError > span").html("")});$("#voucher_upload_attachment_file").on("change",function(){if(document.getElementById("voucher_upload_attachment_file").files.length==0)document.getElementById("cpro_nom-du-fichier").innerHTML="Aucun fichier s&eacute;lectionn&eacute;";else{var n=document.getElementById("voucher_upload_attachment_file").files[0].name;document.getElementById("cpro_nom-du-fichier").innerHTML=n}});$("#voucher_upload_attachment_file_action").on("click",function(){document.getElementById("voucher_upload_attachment_file").click()})});typeof JSViews.Account.RegisterOrderEvents!="function"&&(JSViews.Account.RegisterOrderEvents=function(){$("div[id*='account_order_show_lines_']").each(function(n,t){$(t).on("click",function(n){n.preventDefault();var i=parseInt($(t).attr("data-id")),r=JSEndpoints.order_lines_show;JSViews.Account.ShowOrderProducts(r,i)})});$("div[id*='account_order_options_show_']").each(function(n,t){$(t).on("click",function(n){n.preventDefault();var i=parseInt($(t).attr("data-id"));$("#panel_options_"+i).toggleClass("cpro_voir-plus-options--visible")})});n()});typeof JSViews.Account.RegisterInvoiceEvents!="function"&&(JSViews.Account.RegisterInvoiceEvents=function(){$("div[id*='account_invoice_show_lines_']").each(function(n,t){$(t).on("click",function(n){n.preventDefault();var i=parseInt($(t).attr("data-id")),r=JSEndpoints.invoice_lines_show;JSViews.Account.ShowOrderProducts(r,i)})});$("div[id*='account_invoice_options_show_']").each(function(n,t){$(t).on("click",function(n){n.preventDefault();var i=parseInt($(t).attr("data-id"));$("#panel_options_"+i).toggleClass("cpro_voir-plus-options--visible")})});$(":button[id*='account_document_invoice_download_']").each(function(n,t){$(t).on("click",function(n){n.preventDefault();var i=parseInt($(t).attr("data-id")),r="Facture_"+i+".pdf",u=JSEndpoints.document_invoice_download+"?invoice_id="+i;JSViews.Account.DownloadInvoiceFile(u,r)})});$(":button[id*='account_document_delivery_download_']").each(function(n,t){$(t).on("click",function(i){i.preventDefault();var r=parseInt($(t).attr("data-id")),u=parseInt($("#account_document_invoice_download_"+n).attr("data-id")),f="bon_livraison_"+r+".pdf",e=JSEndpoints.document_delivery_download+"?order_id="+r+"&invoice_id="+u;JSViews.Account.DownloadInvoiceFile(e,f)})});$("div[id*='account_invoice_print_show_']").each(function(n,t){$(t).on("click",function(t){t.preventDefault();$("#account_invoice_print_panel_"+n).toggleClass("cpro_une-facture-print")})});n()});typeof JSViews.Account.InputOrderVoucherEvent!="function"&&(JSViews.Account.InputOrderVoucherEvent=function(){function t(n,t){$(n).after(`<div class="error-message">${t}</div>`)}function i(){let n=!1;return $(".product-selection:checked").each(function(){let i=$(this).data("requires-serial"),r=$(this).val(),u=i?$("#serial_number_"+r).val().trim():"";i&&!u&&(t("#serial_number_"+r,"Le numéro de série est requis pour le produit sélectionné."),n=!0)}),n}function r(){let i=!1;return $(".product-selection:checked").length===0?(t("#order_voucher_comment","Veuillez sélectionner au moins un produit."),!0):(n==="Retractation"&&$(".product-selection:checked").each(function(){let n=$(this).val(),r=parseInt($("#qte_retractation_"+n).val(),10);(isNaN(r)||r<=0)&&(t("#qte_retractation_"+n,"La quantité de rétractation doit être supérieure à 0."),i=!0);let u=parseInt($("#qte_init_"+n).text(),10);(isNaN(u)||u<r)&&(t("#qte_retractation_"+n,"La quantité de rétractation est supérieure à celle disponible."),i=!0)}),i)}var n=$("#order_voucher_type").val();$('input[name="produit_selectionne"]').on("change",function(){$('input[id^="serial_number_"]').prop("disabled",!0).val("");n==="SAV"&&($('input[name="produit_selectionne"]').not(this).prop("checked",!1),$("#serial_number_"+$(this).val()).prop("disabled",!1))});$("#order_voucher_submit").on("click",function(u){u.preventDefault();let f=$(this).attr("id").replace("_submit","_form"),h=$("#"+f),e=h.attr("action"),o=parseInt($("#order_voucher_target_id").val());$(".error-message").remove();let s=!1;(n==="SAV"||n==="Retractation")&&(s=r()||n==="SAV"&&i());let c=$("#order_voucher_comment").val().trim();if(c||(t("#order_voucher_comment","Le commentaire est requis."),s=!0),!s)switch(n){case"SAV":let n=$(".product-selection:checked").val(),t=$("#serial_number_"+n).val().trim();JSViews.Account.PostVoucherSAV(e,f,o,n,t);break;case"Retractation":let i=$(".product-selection:checked").map(function(){let n=parseInt($(this).val()),t=parseInt($("#qte_retractation_"+n).val()),i=parseFloat($("#price_unit_ht_"+n).text().trim().replace(",",".")),r=$("#libelle_"+n).text().trim();return{produitId:n,quantiteRetractation:t,prixVenteHT:i,libelle:r}}).get();JSViews.Account.PostVoucherRetractation(e,f,o,i);break;default:JSViews.Account.PostVoucher(e,f,o)}})});typeof JSViews.Account.RegisterDraftEvents!="function"&&(JSViews.Account.RegisterDraftEvents=function(){$("div[id*='account_draft_show_lines_']").each(function(n,t){var i=!1;$(t).on("click",function(r){r.preventDefault();var f=parseInt($(t).attr("data-id")),e=JSEndpoints.order_lines_show,u="orderproducts_"+n;i||($("#modal_"+u).css("display","none"),JSViews.Account.ShowOrderProducts(e,f,u),i=!0);$("#modal_"+u).toggleClass("cpro_voir-plus-options--visible")})})});typeof JSViews.Account.RegisterAddressEvents!="function"&&(JSViews.Account.RegisterAddressEvents=function(){$("div[id*='account_address_panel_']").each(function(n,t){var r=$("#account_address_action_delete_"+n),i;if($(r).length>0){i=$("#account_address_alert_"+n);$(r).on("click",function(){$(i).offset($(t).offset());$(i).width($(t).width());$(i).height($(t).height());$(i).fadeIn(250).css("position","absolute").css("z-index","999")});$("#account_address_delete_yes_"+n).on("click",function(){$("#account_address_form_delete_"+n).submit()});$("#account_address_delete_no_"+n).on("click",function(){$(i).hide().css("position","relative").css("top","auto").css("left","auto").css("width","auto").css("height","auto").css("z-index","1")})}})})};JSViews.AccountFunc=new function(){typeof JSViews.Account.ShowVoucher!="function"&&(JSViews.Account.ShowVoucher=function(n,t){var r={id:t},u=function(n){$("#async_voucher").html(n)},i=JSModels.asyncCallBacks();i.callComplete=function(){$("#modal_voucher").show()};JSAsync.GetAsync(n,r,!1,u,i)});typeof JSViews.Account.ShowVoucherOrder!="function"&&(JSViews.Account.ShowVoucherOrder=function(n,t,i){var u={voucher_id:t,order_id:i},f=function(n){$("#async_voucher").html(n)},r=JSModels.asyncCallBacks();r.callComplete=function(){$("#modal_voucher").show()};JSAsync.GetAsync(n,u,!1,f,r)});typeof JSViews.Account.ShowVoucherOrderForm!="function"&&(JSViews.Account.ShowVoucherOrderForm=function(n,t){var r=JSEndpoints.voucher_form_show,u={target_id:t,type_id:n},f=function(n){$("#async_voucher_form").html(n);$("#modal_voucher_form #modal_title").html($("#order_voucher_title").val())},i=JSModels.asyncCallBacks();i.callComplete=function(){$("#modal_voucher_form").show()};JSAsync.GetAsync(r,u,!1,f,i)});typeof JSViews.Account.ShowOrderProducts!="function"&&(JSViews.Account.ShowOrderProducts=function(n,t,i){i===undefined&&(i="orderproducts");var u={id:t},f=function(n){$("#async_"+i).html(n)},r=JSModels.asyncCallBacks();r.callComplete=function(){$("#modal_"+i).show()};JSAsync.GetAsync(n,u,!1,f,r)});typeof JSViews.Account.SendMessage!="function"&&(JSViews.Account.SendMessage=function(n,t){var r=function(n){$("#async_voucher_message").html(n);$("#voucher_send_message_value").val("");var t=parseInt($(":input[type='hidden'][id*='voucher_message_created_']").length)-1;t>=0&&($("#voucher_last_activity_date").html($("#voucher_message_created_"+t).val()),$("#voucher_messages_container").animate({scrollTop:$("#voucher_messages_container").offset().top},750))},i=JSModels.asyncCallBacks();i.callError=function(n){$("#async_voucher_message_input").html(n.responseText);$("#voucher_send_message_value").on("focus",function(){$(this).next().text("");JSUtils.UnbindEvent("voucher_send_message_value","focus")})};JSAsync.PostFormAsync(n,t,!1,r,i)});typeof JSViews.Account.PostVoucher!="function"&&(JSViews.Account.PostVoucher=function(n,t,i){var r=function(n){$("#panel_options_"+i).html(n);var t=JSEndpoints.voucher_post_success,r=function(n){$("#async_voucher_form").html(n)};JSAsync.GetAsync(t,null,!1,r)},u=JSModels.asyncCallBacks();u.callError=function(n){$("#async_voucher_form").html(n.responseText)};JSAsync.PostFormAsync(n,t,!0,r)},JSViews.Account.PostVoucherRetractation=function(n,t,i,r){var u={products:r},f=function(n){$("#panel_options_"+i).html(n);var t=JSEndpoints.voucher_post_success,r=function(n){$("#async_voucher_form").html(n)};JSAsync.GetAsync(t,null,!1,r)},e=JSModels.asyncCallBacks();e.callError=function(n){$("#async_voucher_form").html(n.responseText)};console.log(u);JSAsync.PostFormAsync(n,t,!0,f,u)},JSViews.Account.PostVoucherSAV=function(n,t,i,r,u){var f={product_id:r,serial_number:u},e=function(n){$("#panel_options_"+i).html(n);var t=JSEndpoints.voucher_post_success,r=function(n){$("#async_voucher_form").html(n)};JSAsync.GetAsync(t,null,!1,r)},o=JSModels.asyncCallBacks();o.callError=function(n){$("#async_voucher_form").html(n.responseText)};JSAsync.PostFormAsync(n,t,!0,e,f)});typeof JSViews.Account.PostAttachment!="function"&&(JSViews.Account.PostAttachment=function(n,t){var i,r;window.FormData!==undefined?(i=JSModels.asyncCallBacks(),i.callError=function(n){var r=JSUtils.ParseErrorResponse(n.responseText),i=r.split("<br />"),t=i[i.length-1];t.indexOf("fichier :")>=0&&(t="Veuillez sélectionner un fichier");$("#PostVoucherAttachmentError > span").html(t)},r=function(n){var t;if(n.is_success===undefined||n.is_success===null||n.is_success){var r=function(n){$("#async_voucher_attachment").html(n);$("#voucher_upload_attachment_file").val("");var t=parseInt($(":input[type='hidden'][id*='voucher_attachment_created_']").length)-1;t>=0&&$("#voucher_last_activity_date").html($("#voucher_attachment_created_"+t).val())},u=parseInt($("#voucher_upload_attachment_id").val()),f={id:u},e=JSEndpoints.attachment_list_refresh;JSAsync.GetAsync(e,f,!1,r,i)}else t=n.message,n.result!==undefined&&n.result!==null&&(t+="<br />"+n.result.message),$("#PostVoucherAttachmentError > span").html(t)},JSAsync.PostFileAsync(n,t,r,i)):$("#PostVoucherAttachmentError").find(":span").html("FormData is not supported.")});typeof JSViews.Account.DownloadAttachment!="function"&&(JSViews.Account.DownloadAttachment=function(n,t){var i=JSModels.asyncCallBacks();i.callError=function(n){var t=JSUtils.ParseErrorResponse(n.responseText);$("#VoucherAttachmentError > span").html(t)};JSAsync.DownloadFileFromApiAsync(n,t,i)});typeof JSViews.Account.PatchAttachment!="function"&&(JSViews.Account.PatchAttachment=function(n,t){var u=JSEndpoints.attachment_delete,f={ticket_id:n,attachment_id:t},i=JSModels.asyncCallBacks(),r;i.callError=function(n){var t=JSUtils.ParseErrorResponse(n.responseText);$("#VoucherAttachmentError").find(":span").html(t)};r=function(n){$("#async_voucher_attachment").html(n);$("#voucher_upload_attachment_file").val("");$("#voucher_last_activity_date").html($("#voucher_attachment_last_activity_date").val())};JSAsync.GetAsync(u,f,!1,r,i)});typeof JSViews.Account.DownloadInvoiceFile!="function"&&(JSViews.Account.DownloadInvoiceFile=function(n,t){var i=JSModels.asyncCallBacks();i.callError=function(n){if(n.responseText!==undefined)$("#async_invoice_message").html(n.responseText),$("#modal_invoice_message").show();else{var i=function(n){$("#async_invoice_message").html(n);$("#modal_invoice_message").show()},r=JSEndpoints.document_invoice_download_fails,u={file_name:t,status_code:n.status};JSAsync.GetAsync(r,u,!1,i)}};JSAsync.DownloadFileAsync(n,t,i)});typeof JSViews.Account.PostTicket!="function"&&(JSViews.Account.PostTicket=function(n,t){try{var r=function(){$("#modalCreationTicket #messageRetourEnvoi").html("Votre message a bien été envoyé, nous vous répondrons dans les meilleurs délais.");$("#modalCreationTicket #messageRetourEnvoi").show()},i=JSModels.asyncCallBacks();i.callError=function(){$("#modalCreationTicket #messageRetourEnvoi").html("Une erreur s'est produite, veuillez rééssayer dans quelques minutes.")};JSAsync.PostFormAsync(n,t,!1,r,i)}catch(u){JSUtils.LogError(u)}});typeof JSViews.Account.DownloadCatalog!="function"&&(JSViews.Account.DownloadCatalog=function(n,t){$("#async_account_menu_message").html("Veuillez patienter votre document est en cours de préparation ...");$("#modal_account_menu_message").show();var i=JSModels.asyncCallBacks();i.callError=function(n){var i=function(n){$("#async_account_menu_message").html(n);$("#modal_account_menu_message").show()},r=JSEndpoints.document_catalog_download_fails,u={file_name:t,status_code:n.status};JSAsync.GetAsync(r,u,!1,i)};i.callComplete=function(n){n.status==200&&($("#async_account_menu_message").html(""),$("#modal_account_menu_message").hide())};JSAsync.DownloadFileFromApiAsync(n,t,i)})}}function t(){var n,t,i;IS_FOR_DEBUG&&JSUtils.Log("INIT JSViews area Address js func");n=$("#form_address_container_alert");t=$(n).find("span");$(t).length==0?$(n).hide():(i=!1,$(t).each(function(n,t){if($(t).html().trim()!="")return i=!0,!1}),i||$(n).hide())}function i(){IS_FOR_DEBUG&&JSUtils.Log("INIT JSViews area Error js func");JSViews.ErrorFunc=new function(){}}function r(){IS_FOR_DEBUG&&JSUtils.Log("INIT JSViews area Home js func");JSViews.HomeFunc=new function(){function n(n,i,r){var f=function(n){$("#async_partenairs").replaceWith(n)},u=JSModels.asyncCallBacks();u.callComplete=function(){t(i,r)};JSAsync.GetAsync(n,null,!0,f,u)}function t(n,t){var u=function(n){$("#async_news").replaceWith(n)},r=JSModels.asyncCallBacks();r.callComplete=function(){i(t)};JSAsync.GetAsync(n,null,!0,u,r)}function i(n){var t=function(n){$("#async_topsales").replaceWith(n)};JSAsync.GetAsync(n,null,!0,t)}typeof JSViews.Home.RenderIndexAsync!="function"&&(JSViews.Home.RenderIndexAsync=function(t,i,r){n(t,i,r)})}}function u(){function n(){$("#shopping_card_delete_action").on("click",function(n){n.preventDefault();var t=$(this).attr("href");JSViews.Cart.RemoveCart(t)});$("a[id*='shopping_card_product_delete_action_']").each(function(n,t){$(t).on("click",function(t){t.preventDefault();var i=$(this).attr("href"),r=parseInt($("#shopping_card_product_"+n).val());JSViews.Cart.RemoveCartProduct(i,r)})});$("div[id*='shopping_card_product_quantity_remove_']").each(function(n,t){$(t).on("click",function(t){t.preventDefault();var r=JSEndpoints.cart_product_post,u=parseInt($("#shopping_card_product_"+n).val()),i=parseInt($("#shopping_card_product_quantity_"+n).val());i>0&&(i-=1);i>0&&JSViews.Cart.PostCartProduct(r,u,i,"shopping_card_product_quantity_"+n)})});$("div[id*='shopping_card_product_quantity_add_']").each(function(n,t){$(t).on("click",function(t){t.preventDefault();var r=JSEndpoints.cart_product_post,u=parseInt($("#shopping_card_product_"+n).val()),i=parseInt($("#shopping_card_product_quantity_"+n).val());i+=1;JSViews.Cart.PostCartProduct(r,u,i,"shopping_card_product_quantity_"+n)})});$(":input[id*='shopping_card_product_quantity_']").each(function(n,t){$(t).on("change",function(i){i.preventDefault();var u=JSEndpoints.cart_product_post,f=parseInt($("#shopping_card_product_"+n).val()),r=parseInt($(t).val());r>0||(r=1);JSViews.Cart.PostCartProduct(u,f,r,$(t).attr("id"))})})}IS_FOR_DEBUG&&JSUtils.Log("INIT JSViews area Cart js func");JSViews.CartEvents=new function(){n()};JSViews.CartFunc=new function(){typeof JSViews.Cart.AfficherDemandeDevis!="function"&&(JSViews.Cart.AfficherDemandeDevis=function(n){var t=function(n){var t,i,r;$("#detailsDemandeDevis").html(n);t=$("#form_draft_container_alert");i=$(t).find("span");$(i).length==0&&$(t).hide();r=document.getElementById("detailsDemandeDevis");r.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})};JSAsync.PostAsync(n,null,!0,t)});typeof JSViews.Cart.SauvegarderPanier!="function"&&(JSViews.Cart.SauvegarderPanier=function(n){var t=function(n){$("#async_cart_save_alert").html(n);$("#nomPanier").val("")},i={nomPanier:$("#nomPanier").val()};JSAsync.PostAsync(n,i,!0,t)});typeof JSViews.Cart.RemoveCart!="function"&&(JSViews.Cart.RemoveCart=function(n){var t=function(){location.reload()},i={__RequestVerificationToken:$(":input[name='__RequestVerificationToken']").val()};JSAsync.PostAsync(n,i,!0,t)});typeof JSViews.Cart.RemoveCartProduct!="function"&&(JSViews.Cart.RemoveCartProduct=function(n,t){var i=function(){var n=location.href.replace("?displayDraftTemplate=True","");location.href=n},r={product_id:parseInt(t.toString()),__RequestVerificationToken:$(":input[name='__RequestVerificationToken']").val()};JSAsync.PostAsync(n,r,!0,i)});typeof JSViews.Cart.PostCartProduct!="function"&&(JSViews.Cart.PostCartProduct=function(t,i,r){var e=function(){$("#shopping_card_form").load(" #shopping_card_form",function(){n()})},u=JSModels.asyncCallBacks(),f;u.callError=function(){$("#shopping_card_form").load(" #shopping_card_form",function(){n()})};u.callComplete=function(){JSViews.Shared.RenderCartAsync(JSEndpoints.header_cart_refresh,"async_header_panier")};f={pid:parseInt(i.toString()),qty:parseInt(r.toString()),__RequestVerificationToken:$(":input[name='__RequestVerificationToken']").val()};JSAsync.PostAsync(t,f,!0,e,u)})}}function f(){function n(){for(var t,i,o,r=$("#product_category_filter_form"),e=$(r).attr("action"),u=$(":checked[name*='Result.Criteres'][type='checkbox']"),f="",n=0;n<u.length;n++)f+=parseInt($(u[n]).attr("id").replace("Criteres_","")),n+1<u.length&&(f+="%3a");for(t="",i=$(":checked[name*='Result.Constructeurs'][type='checkbox']"),n=0;n<i.length;n++)t+=parseInt($(i[n]).attr("id").replace("Constructeurs_","")),n+1<i.length&&(t+="%3a");o=parseInt($("#Result_CategorieId").val());e+="?categorieId="+o+"&crits="+f+"&constructeur_id="+t+"&page=1&order=s%3ad%3bp%3aa%3b";$(r).attr("action",e);$(r).submit()}IS_FOR_DEBUG&&JSUtils.Log("INIT JSViews area Product js func");JSViews.ProductEvents=new function(){JSViews.Shared.BindCartProductEvents();$(":input[id*='product_category_filter_action_']").each(function(t,i){$(i).on("click",function(t){t.preventDefault();n()})});$(":input[id*='product_category_filter_constructor']").each(function(t,i){$(i).on("click",function(t){t.preventDefault();n()})})};JSViews.ProductFunc=new function(){typeof JSViews.Product.DeselectionnerMagasin!="function"&&(JSViews.Product.DeselectionnerMagasin=function(n,t){var i=function(n){$("#async_product_shops").html(n);$("#product_count_label").html($("#StockMagasinSelectionne").html());$("#product_count_label").attr("class","cpro_fproduit--nbrDispo  cpro_fproduit--nbrDispo-"+$("#StockMagasinSelectionne").html())},r={pid:t};JSAsync.PostAsync(n,r,!0,i)});typeof JSViews.Product.ChangerMagasinSelectionne!="function"&&(JSViews.Product.ChangerMagasinSelectionne=function(n,t,i){var r=function(n){$("#async_product_shops").html(n);$("#product_count_label").html($("#StockMagasinSelectionne").html());$("#product_count_label").attr("class","cpro_fproduit--nbrDispo  cpro_fproduit--nbrDispo-"+$("#StockMagasinSelectionne").html())},u={mid:t,pid:i};JSAsync.PostAsync(n,u,!0,r)});typeof JSViews.Product.FetchShopList!="function"&&(JSViews.Product.FetchShopList=function(n){var t=function(n){$("#async_shop_list").html(n)};JSAsync.GetAsync(n,null,!1,t)})}}function e(){IS_FOR_DEBUG&&JSUtils.Log("INIT JSViews area Search js func");JSViews.SearchEvents=new function(){JSViews.Shared.BindCartProductEvents()}}function o(){IS_FOR_DEBUG&&JSUtils.Log("INIT JSViews area Shared js func");JSViews.SharedEvents=new function(){typeof JSViews.Shared.BindCartProductEvents!="function"&&(JSViews.Shared.BindCartProductEvents=function(){try{$("div[id*='search_card_product_quantity_remove_']").each(function(n,t){$(t).on("click",function(t){t.preventDefault();var i=parseInt($("#search_card_product_quantity_"+n).val()),r=parseInt($("#search_card_product_quantity_"+n).attr("max"));i>0&&(i-=1);i>0||(i=1);$("#search_card_product_quantity_"+n).val(i)})});$("div[id*='search_card_product_quantity_add_']").each(function(n,t){$(t).on("click",function(t){t.preventDefault();var i=parseInt($("#search_card_product_quantity_"+n).val());i+=1;$("#search_card_product_quantity_"+n).val(i)})});$(":input[id*='search_card_product_quantity_']").each(function(n,t){$(t).on("change",function(n){n.preventDefault();var i=parseInt($(t).val()),r=parseInt($(t).attr("max"));i>0||(i=1);$(t).val(i)})})}catch(n){JSUtils.LogError(n)}})};JSViews.SharedFunc=new function(){function n(n,t){var i=function(n){$("#"+t).html(n)};JSAsync.GetAsync(n,null,!0,i)}typeof JSViews.Shared.AfficherModalAjoutPanier!="function"&&(JSViews.Shared.AfficherModalAjoutPanier=function(t,i,r){var e,u,o,f;try{if(e=1,r!==undefined&&r!==null&&r!=""){u=null;switch(r){case"qte_produit_":r=r+i}u=$("#"+r);u!=null&&(e=parseInt(u.val()))}o=function(n){$("#detailsAjoutPanier").html(n)};f=JSModels.asyncCallBacks();f.callError=function(){location.reload()};f.callComplete=function(){n(JSEndpoints.header_cart_refresh,"async_header_panier")};JSAsync.PostAsync(t,{produitId:i,qteProduit:e},!0,o,f)}catch(s){JSUtils.LogError(s)}});typeof JSViews.Shared.PostProductToDraft!="function"&&(JSViews.Shared.PostProductToDraft=function(n,t,i){var u,r;try{if(u=1,i!==undefined&&i!==null&&i!=""){r=null;switch(i){case"qte_produit_":i=i+t}r=$("#"+i);r!=null&&(u=parseInt(r.val()))}window.location.href=n+"?produitId="+t+"&qteProduit="+u}catch(f){JSUtils.LogError(f)}});typeof JSViews.Shared.ViderModalAjoutPanier!="function"&&(JSViews.Shared.ViderModalAjoutPanier=function(){$("#detailsAjoutPanier").html("")});typeof JSViews.Shared.RenderCartAsync!="function"&&(JSViews.Shared.RenderCartAsync=function(t,i){n(t,i)});typeof JSViews.Shared.RenderMenuAsync!="function"&&(JSViews.Shared.RenderMenuAsync=function(t,i){n(t,i)})}}JSViews.Account={};JSViews.Address={};JSViews.Error={};JSViews.Header={};JSViews.Home={};JSViews.Cart={};JSViews.Product={};JSViews.Search={};JSViews.Shared={};typeof JSViews.Init!="function"&&(JSViews.Init=function(s){o();switch(s){case"Account":n();break;case"Address":t();break;case"Error":i();break;case"Home":r();break;case"Cart":u();break;case"Product":f();break;case"Search":e()}})},JSAsyncFunc=new function(){"use strict";function i(t,i,r,u,f,e){var o,s;try{o=new FormData;$("#"+r).find(":input[type!='file']").each(function(){var n=$(this).attr("name"),t=$(this).val();n==undefined||n==""||n=="__RequestVerificationToken"||o.append(n,t)});$("#"+r).find(":input[type='file']").each(function(){for(var i=$(this).attr("name"),r=$(this).get(0),t=r.files,n=0;n<t.length;n++)o.append(i,t[n])});s=function(n){n.setRequestHeader("Authorization",i)};n(t,o,"POST",u,s,f,e,!1)}catch(h){JSUtils.LogError(h)}}function r(t,i,r,u,f,e){try{var o=function(n){n.setRequestHeader("Authorization",i)};n(t,null,"GET",r,o,u,f,e)}catch(s){JSUtils.LogError(s)}}function t(n,t){var e=3,i,f,r,u;t!==undefined&&t>0&&(e=t);try{for(IS_FOR_DEBUG&&JSUtils.Log("FETCH JSAsync optional callback in function arguments"),i=[],i=JSUtils.GetOptionalParams(n,e),f=JSModels.asyncCallBacks(),r="",u=0;u<i.length;u++)i[u].callBeforeSend!=null&&(f.callbeforesend=i[u].callBeforeSend,r+="callbeforesend "),i[u].callError!=null&&(f.callError=i[u].callError,r+="callError "),i[u].callComplete!=null&&(f.callComplete=i[u].callComplete,r+="callComplete ");if(IS_FOR_DEBUG){try{r!=""&&(r="("+r.trim()+")");i.length>0&&r==""&&(r="(unexpected arguments)")}catch(o){JSUtils.LogError(o)}JSUtils.Log("FOUND JSAsync "+i.length+" optional callback in function arguments "+r)}return f}catch(o){JSUtils.LogError(o)}return JSModels.asyncCallBacks()}function n(n,t,i,r,u,f,e,o){var s,h;try{IS_FOR_DEBUG&&JSUtils.Log("START JSAsync ajax xhr "+i+" request to "+n);s=!1;(o===undefined||o===null)&&(s=!0,o="application/x-www-form-urlencoded; charset=UTF-8");h=function(){var n=new XMLHttpRequest;return o==="application/octetstream"&&(n.responseType="blob"),n};$.ajax({cache:!1,type:i,url:n,data:t,contentType:o,processData:s,xhr:h,beforeSend:function(n){u!==undefined&&u!==null&&u(n)},success:function(t){IS_FOR_DEBUG&&JSUtils.Log("SUCCESS JSAsync ajax xhr "+i+" request to "+n);r(t)},error:function(t){IS_FOR_DEBUG&&(JSUtils.Log("ERROR JSAsync ajax xhr "+i+" request to "+n),t.responseText!==undefined?JSUtils.LogError(t.responseText):JSUtils.LogError(t.status));f!==undefined&&f!==null&&f(t)},complete:function(t){IS_FOR_DEBUG&&JSUtils.Log("COMPLETE JSAsync ajax xhr "+i+" request to "+n);e!==undefined&&e!==null&&e(t)}})}catch(c){JSUtils.LogError(c)}}typeof JSAsync.GetAsync!="function"&&(JSAsync.GetAsync=function(i,r,u,f){var e=t(arguments,4),o,s;u===undefined||u?n(i,r,"GET",f,e.callBeforeSend,e.callError,e.callComplete):(o=function(n){n.status===500?JSUtils.LogError(n):window.location.reload()},s=function(){n(i,r,"GET",f,e.callBeforeSend,e.callError,e.callComplete)},n("/compte/preflight",null,"GET",s,null,o,null))});typeof JSAsync.PostAsync!="function"&&(JSAsync.PostAsync=function(i,r,u,f){var e=t(arguments,4),o,s;u===undefined||u?n(i,r,"POST",f,e.callBeforeSend,e.callError,e.callComplete):(o=function(n){n.status===500?JSUtils.LogError(n):window.location.reload()},s=function(){n(i,r,"POST",f,e.callBeforeSend,e.callError,e.callComplete)},n("/compte/preflight",null,"GET",s,null,o,null))});typeof JSAsync.PostFormAsync!="function"&&(JSAsync.PostFormAsync=function(i,r,u,f,e=null){var o=t(arguments,4),l=$("#"+r),s=$(l).serializeArray(),h,c;e!=null&&(e&&e.product_id!=null?(s.push({name:"product_id",value:e.product_id}),e.serial_number!=null&&s.push({name:"serial_number",value:e.serial_number})):e&&e.products&&s.push({name:"products",value:JSON.stringify(e.products)}));u===undefined||u?n(i,s,"POST",f,o.callBeforeSend,o.callError,o.callComplete):(h=function(n){n.status===500?JSUtils.LogError(n):window.location.reload()},c=function(){n(i,s,"POST",f,o.callBeforeSend,o.callError,o.callComplete)},n("/compte/preflight",null,"GET",c,null,h,null));event.preventDefault()});typeof JSAsync.PostFileAsync!="function"&&(JSAsync.PostFileAsync=function(r,u,f){var e=t(arguments),o=function(n){n.status===500?JSUtils.LogError(n):window.location.reload()},s=function(n){i(r,n,u,f,e.callError,e.callComplete)};n("/compte/preflight",null,"GET",s,null,o,null);event.preventDefault()});typeof JSAsync.DownloadFileFromApiAsync!="function"&&(JSAsync.DownloadFileFromApiAsync=function(i,u){var f=t(arguments,2),e="application/octetstream",o=function(n){n.status===500?JSUtils.LogError(n):window.location.reload()},s=function(n){var t=function(n){var t=document.createElement("a"),r=window.URL||window.webkitURL,f=new Blob([n],{type:e}),o=r.createObjectURL(f);$(t).prop("href",o);$(t).prop("download",u);$(t).get(0).click();r.revokeObjectURL(i)};r(i,n,t,f.callError,f.callComplete,e)};n("/compte/preflight",null,"GET",s,null,o,null);event.preventDefault()});typeof JSAsync.DownloadFileAsync!="function"&&(JSAsync.DownloadFileAsync=function(i,r){var u=t(arguments,2),f="application/octetstream",e=function(n){n.status===500?JSUtils.LogError(n):window.location.reload()},o=function(){var t=function(n){var t=document.createElement("a"),u=window.URL||window.webkitURL,e=new Blob([n],{type:f}),o=u.createObjectURL(e);$(t).prop("href",o);$(t).prop("download",r);$(t).get(0).click();u.revokeObjectURL(i)};n(i,null,"GET",t,u.callBeforeSend,u.callError,u.callComplete,f)};n("/compte/preflight",null,"GET",o,null,e,null);event.preventDefault()})},JSUtilsFunc=new function(){"use strict";function r(r){try{if(r!=""){var u=i()+" [INFO] "+r+"\n";t.log(u)}}catch(f){return n(f),""}}function n(n){try{var r=i()+" [ERROR] "+n+".\n";t.logError(r)}catch(u){}}function u(){this.log=function(n){try{console.log(n)}catch(t){}};this.logError=function(n){try{console.error(n)}catch(t){}}}function i(){var n=new Date,t=n.toLocaleTimeString("fr-FR",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"UTC"});return n=n.getFullYear().toString()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"-"+("0"+n.getDate()).slice(-2)+" "+t+":"+("00"+n.getMilliseconds()).slice(-3),n.toString()}var t=new u;typeof JSUtils.GetOptionalParams!="function"&&(JSUtils.GetOptionalParams=function(t,i){var f=[],u,r;try{for(u=Array.prototype.slice.call(t,i),r=0;r<u.length;r++)f.push(u[r])}catch(e){n(e)}return f});typeof JSUtils.LogError!="function"&&(JSUtils.LogError=function(t){n(t)});typeof JSUtils.Log!="function"&&(JSUtils.Log=function(n){r(n)});typeof JSUtils.UnbindEvent!="function"&&(JSUtils.UnbindEvent=function(n,t){$("#"+n).off(t)});typeof JSUtils.ParseErrorResponse!="function"&&(JSUtils.ParseErrorResponse=function(t){var i,r,f,u,e;try{if(t!==undefined&&t!==""&&t.substring(0,1)==="{"&&(i=JSON.parse(t),t=i.message,i.result!==undefined&&i.result!==null&&(r=i.result,r.invalid_parameters!==undefined&&r.invalid_parameters!==null&&r.invalid_parameters.length>0)))for(f=r.invalid_parameters,u=0;u<f.length;u++)e=f[u],t+="<br />"+e.name+" : "+e.value}catch(o){n(o)}return t});typeof JSUtils.GetExtensionFromFileName!="function"&&(JSUtils.GetExtensionFromFileName=function(t){try{var i=t.split(".");if(i.length>0)return i[i.length-1]}catch(r){n(r)}return t})}